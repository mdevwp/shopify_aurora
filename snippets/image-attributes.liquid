{%- liquid
  if size == 'medium'
    assign res_list = '128,240,380,480,540,640,720,920,1080' | split: ','
  elsif size == 'small'
    assign res_list = '64,128,240,380,480,540,640' | split: ','
  elsif size == 'xsmall'
    assign res_list = '64,128,240,380' | split: ','
  elsif size == 'product-card-image'
    assign res_list = '128,240,380,540,720' | split: ','
  else
    assign res_list = '128,240,380,540,720,920,1080,1440,1920' | split: ','
  endif


   if class contains 'media__image'
      assign is_eager_loading = true 
   endif;


  assign loading = 'lazy'
  if is_eager_loading
    assign loading = 'eager'
  endif
-%}

{% assign mobile_res_list = '128,240,380,480,540,640' | split: ',' %}

{% assign image_alt = image.alt | escape %}
{% if image_alt == blank %}
    {% if product %}
        {% assign image_alt = 'Foto von ' | append: product.title | escape %}
    {% elsif section.settings.title != blank %}
        {% assign image_alt = section.settings.title | escape %}
    {% else %}
        {% assign image_alt = 'Foto von Alexascha' %}
        {% if class contains 'logo-img' %}
            {% assign image_alt = 'Logo' %}
        {% endif %}
    {% endif %}
{% endif %}

{% if class contains 'media__image--mobile' %}
    {% assign selected_res_list = mobile_res_list %}
{% else %}
    {% assign selected_res_list = res_list %}
{% endif %}

{% assign max_size = selected_res_list.last %}
{% assign min_size = selected_res_list.first %}
{% assign src_width = max_size %}

{% if class contains 'media__image--mobile' %}
    {% assign src_width = max_size %}
{% endif %}

{% if is_variant_image != true and class contains 'media__image' %}
    class='{{ class }} {{ class_from_parent }}' 
    nopin='nopin'
    src='{{ image | image_url: width: src_width }}'
    srcset='
        {%- for res in selected_res_list -%}
            {{ image | image_url: width: res }} {{ res }}w,
        {%- endfor -%}
    '
    sizes='(max-width: 480px) 100vw, 
           (max-width: 768px) 90vw, 
           (max-width: 1024px) 80vw, 
           (max-width: 1440px) 70vw, 
           {{ max_size }}px'
    alt='{{ image_alt }}'
    title='{{ image_alt }}'
    width='{{ src_width }}'
    height='{{ src_width | divided_by: image.aspect_ratio | round }}'
    style='object-position: {{ image.presentation.focal_point }};' 
    fetchpriority='high'
  
{% else %}
  
    class='lazyload {{ class }}
    {{ class_from_parent }}
    {% if is_multiply_target %} multiply-mode__target {% endif %}' 
    nopin='nopin'
    src='
    {% if is_variant_image != true %}
      {{- image | image_url: width: 160 -}}
      ' data-srcset='
      {%- for res in res_list -%}
        {{ image | image_url: width: res }}
        {{ res }}w,
      {%- endfor -%}
    {% else %}
      {{ image | replace: 'files/', '' | file_img_url: 'original' }}
      
    {% endif %}
    '
    data-sizes='auto' 
    {% if show_alt != false %}
      alt="{{ image_alt }}"
    {% endif %}
    title='{{ image_alt }}'
    loading='{{ loading }}' width='1' height='1' style='object-position:
    {{ image.presentation.focal_point }};'
    {% if parent_fit == blank %}
      data-parent-fit='cover' data-aspectratio='
      {{- image.aspect_ratio -}}
      '
    {% endif %}
  
{% endif %}